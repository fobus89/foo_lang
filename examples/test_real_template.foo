// Реальный тест с template интерполяцией

struct User {
    name: string,
    age: int
}

macro generatePrint(structParam: StructType) {
    // println("=== Macro-time: Processing " + structParam.Name + " ===")

    generate {
        $if false {
            println("before generate")
        }

        $for i in 10 {
            println("before generate ${i}")
        }

        fn print${structParam.Name}() {
            println("Function for ${structParam.Name} struct!")
            println("Kind: ${structParam.Kind}")
        }
        println("before generate")
    }
}

println("=== Testing REAL template generation ===")

// Вызываем макрос
@generatePrint(User)

// Должна создаться функция printUser()
printUser()